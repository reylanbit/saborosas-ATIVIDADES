<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Atividade 17 - Conversor de Moeda com Axios</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Arial, sans-serif; line-height: 1.6; margin: 0; }
    .container { max-width: 900px; margin: 0 auto; padding: 24px; }
    .field { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; }
    input[type="number"] { width: 220px; padding: 12px 14px; border: 1px solid #e5e7eb; border-radius: 10px; font-size: 16px; }
    .spinner { width: 20px; height: 20px; border: 3px solid #e5e7eb; border-top-color: #2563eb; border-radius: 50%; animation: spin 0.8s linear infinite; display: none; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .status { font-size: 14px; color: #6b7280; }
    .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; }
    @media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }
    .card { border: 1px solid #e5e7eb; border-radius: 12px; padding: 16px; background: #fff; }
    .value { font-weight: 800; font-size: 18px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Missão do Dia: Conversor de Moeda com Axios</h1>
    <p>Digite um valor em BRL para ver o equivalente em USD e EUR.</p>
    <div class="field">
      <input id="amount" type="number" min="0" step="0.01" placeholder="Valor em BRL">
      <div id="spinner" class="spinner" aria-hidden="true"></div>
      <div id="status" class="status"></div>
    </div>
    <div class="grid">
      <div class="card">
        <div>USD</div>
        <div id="usd" class="value"></div>
      </div>
      <div class="card">
        <div>EUR</div>
        <div id="eur" class="value"></div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    var input = document.getElementById('amount');
    var spinner = document.getElementById('spinner');
    var status = document.getElementById('status');
    var usdEl = document.getElementById('usd');
    var eurEl = document.getElementById('eur');
    var fmtUSD = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });
    var fmtEUR = new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' });
    function clear() { usdEl.textContent = ''; eurEl.textContent = ''; }
    function setLoading(on) { spinner.style.display = on ? 'inline-block' : 'none'; status.textContent = on ? 'Carregando...' : ''; }
    function convertBRL() {
      var val = parseFloat(input.value);
      if (!isFinite(val) || val <= 0) { clear(); setLoading(false); return; }
      setLoading(true);
      axios.get('https://economia.awesomeapi.com.br/last/USD-BRL,EUR-BRL')
        .then(function (res) {
          var data = res.data || {};
          var usdAsk = data.USDBRL && parseFloat(data.USDBRL.ask);
          var eurAsk = data.EURBRL && parseFloat(data.EURBRL.ask);
          if (!usdAsk || !eurAsk) throw new Error('Cotação indisponível');
          var usd = val / usdAsk;
          var eur = val / eurAsk;
          usdEl.textContent = fmtUSD.format(usd);
          eurEl.textContent = fmtEUR.format(eur);
          setLoading(false);
        })
        .catch(function () {
          clear();
          status.textContent = 'Falha ao obter cotação.';
          setLoading(false);
        });
    }
    input.addEventListener('input', convertBRL);
  </script>
</body>
</html>
